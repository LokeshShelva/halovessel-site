---
import { SITE_TITLE } from '../consts';
import { Icon } from 'astro-icon/components';

const pathname = Astro.url.pathname;

const navLinks = [
	{ href: '/halovessel-site/blog/', label: 'blog' },
	{ href: '/halovessel-site/projects/', label: 'projects' },
	{ href: '/halovessel-site/about/', label: 'about' },
];

function isActive(href: string) {
	return pathname.startsWith(href);
}
---

<header>
	<nav>
		<a href="/halovessel-site/" class="logo">
			<span class="logo-prefix">~/</span>{SITE_TITLE.toLowerCase()}
		</a>
		<div class="nav-right">
			<div class="nav-links" id="nav-links">
				{navLinks.map(link => (
					<a href={link.href} class:list={[{ active: isActive(link.href) }]}>
						<span class="link-prefix">./</span>{link.label}
					</a>
				))}
			</div>

			<button class="mobile-toggle" aria-label="Toggle navigation" id="nav-toggle">
				<Icon name="lucide:menu" size="18" />
			</button>
		</div>
	</nav>
</header>

<script>
	const navToggle = document.getElementById('nav-toggle');
	const links = document.getElementById('nav-links');

	navToggle?.addEventListener('click', () => {
		links?.classList.toggle('open');
	});
</script>

<style>
	header {
		position: sticky;
		top: 0;
		z-index: 100;
		background-color: var(--header-bg);
		backdrop-filter: blur(10px);
		-webkit-backdrop-filter: blur(10px);
		border-bottom: 1px solid var(--border);
		transition: background-color 300ms ease, border-color 300ms ease;
	}

	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		max-width: var(--max-width);
		margin: 0 auto;
		padding: 0 2rem;
		height: var(--header-height);
	}

	.logo {
		font-family: var(--mono);
		font-size: 0.85rem;
		font-weight: 700;
		color: var(--purple);
		text-decoration: none;
		transition: color var(--transition);
	}

	.logo-prefix {
		color: var(--fg-dim);
	}

	.logo:hover {
		color: var(--fg);
	}

	.nav-right {
		display: flex;
		align-items: center;
		gap: 1rem;
	}

	.nav-links {
		display: flex;
		align-items: center;
		gap: 1.5rem;
	}

	.nav-links a {
		font-family: var(--mono);
		font-size: 0.8rem;
		color: var(--fg-muted);
		text-decoration: none;
		transition: color var(--transition);
	}

	.link-prefix {
		color: var(--fg-dim);
	}

	.nav-links a:hover {
		color: var(--fg);
	}

	.nav-links a.active {
		color: var(--fg);
	}



	.mobile-toggle {
		display: none;
		background: none;
		border: none;
		color: var(--fg);
		cursor: pointer;
		padding: 0.5rem;
	}

	@media (max-width: 640px) {
		nav { padding: 0 1rem; }

		.mobile-toggle {
			display: block;
		}

		.nav-links {
			display: none;
			position: absolute;
			top: var(--header-height);
			left: 0;
			right: 0;
			flex-direction: column;
			background-color: var(--bg);
			border-bottom: 1px solid var(--border);
			padding: 1rem 1rem;
			gap: 0.75rem;
			align-items: flex-start;
		}

		.nav-links.open {
			display: flex;
		}
	}
</style>
